<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Staff Control | Anti-Filtras</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body { background: #050505; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .panel { background: #0d0d12; border: 1px solid #222; padding: 40px; border-radius: 30px; width: 100%; max-width: 500px; }
        .row { display: flex; justify-content: space-between; align-items: center; background: #15151c; padding: 15px 20px; border-radius: 15px; margin-bottom: 12px; border: 1px solid #222; }
        .btn { border: none; padding: 10px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; min-width: 130px; transition: 0.3s; }
        .s-1 { background: rgba(0, 255, 136, 0.1); color: #00ff88; border: 1px solid #00ff88; }
        .s-2 { background: rgba(255, 204, 0, 0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .s-0 { background: rgba(255, 62, 62, 0.1); color: #ff3e3e; border: 1px solid #ff3e3e; }
        input { background: #15151c; border: 1px solid #333; color: #fff; padding: 15px; border-radius: 12px; width: 100%; margin-bottom: 20px; text-align: center; }
    </style>
</head>
<body>
    <div id="login" style="text-align:center">
        <h2>STAFF PORTAL</h2>
        <input type="password" id="pass" placeholder="Password">
        <button onclick="auth()" class="btn s-1">ACCEDER</button>
    </div>

    <div id="ctrl" class="panel" style="display:none">
        <h2 style="color:#00ff88; text-align:center; margin-bottom:30px">MASTER CONTROL</h2>
        <div id="container"></div>
        <p style="text-align:center; color:#444; font-size:0.7rem; margin-top:20px">Desarrollado por Lolo_</p>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, updateDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        const firebaseConfig = { apiKey: "AIzaSyAEUOzOWdq0xs3qiIlX1RzB6bpKkkMLykA", authDomain: "antifiltras-7116d.firebaseapp.com", projectId: "antifiltras-7116d", appId: "1:795745598666:web:72b77816d3c2a3c17f8833" };
        const app = initializeApp(firebaseConfig); const db = getFirestore(app);

        window.auth = () => { if(document.getElementById('pass').value === 'Antifiltras2026') { document.getElementById('login').style.display='none'; document.getElementById('ctrl').style.display='block'; } };

        onSnapshot(doc(db, "BOT_CONTROL", "settings"), (s) => {
            const d = s.data();
            document.getElementById('container').innerHTML = `
                ${btn('ðŸ¤– ESTADO DEL BOT', 'botEnabled', d.botEnabled)}
                ${btn('ðŸŒ WEB PRINCIPAL', 'webEnabled', d.webEnabled)}
                ${btn('ðŸ“© SOPORTE DISCORD', 'ticketsEnabled', d.ticketsEnabled)}
                ${btn('ðŸ“¡ REPORTES WEB', 'webReportsEnabled', d.webReportsEnabled)}
                ${btn('ðŸš« BANS GLOBALES', 'bansEnabled', d.bansEnabled)}
            `;
        });
        window.toggle = async (f,v) => { await updateDoc(doc(db, "BOT_CONTROL", "settings"), { [f]: v === 1 ? 2 : (v === 2 ? 0 : 1) }); };
        function btn(l,f,v){ return `<div class="row"><span>${l}</span><button class="btn s-${v}" onclick="toggle('${f}',${v})">${v===1?'OPERATIVO':v===2?'MANTENIMIENTO':'OFF'}</button></div>`; }
    </script>
</body>
</html>
